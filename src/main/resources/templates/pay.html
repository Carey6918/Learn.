<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>支付</title>
    <!-- custom-theme -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="Tabs Payment Form Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design"/>
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <!-- //custom-theme -->
    <link href="css/pay.css" rel="stylesheet" type="text/css" media="all"/>
    <link rel="stylesheet" href="css/creditly.css" type="text/css" media="all"/>
    <link rel="stylesheet" href="css/easy-responsive-tabs.css">
    <script src="js/jquery.min.js"></script>
    <!-- font-awesome-icons -->
    <link href="css/font-awesome.css" rel="stylesheet">
    <!--<link href="css/style.css" rel="stylesheet">-->
    <!-- //font-awesome-icons -->
    <link href="//fonts.googleapis.com/css?family=Mirza:400,500,600,700&amp;subset=arabic,latin-ext" rel="stylesheet">
    <script th:inline="javascript">
        function pay() {
            var email = $('#email').val();
            var password = $('#password').val();
            $.ajax({
                type: 'post',
                url: '/paySuccess',
                data: {email: email, password: password, num: [[${price}]]},
                success: function (data) {
                    console.log(data)
                    if (data == -1) {
                        alert("账号不存在");
                    } else if (data == -2) {
                        alert("余额不足！");

                    } else if(data==-3){
                        alert("订单超时！");
                        window.close();
                    }

                    else if (data == 0) {
                        console.log(window.parent.location.href);
                        setCookie('need_refresh', 'yes');
                        alert("交易成功");
                        window.close();
                    }
                }
            })
        }
        function setCookie(name,value)
        {
            var Days = 30;
            var exp = new Date();
            exp.setTime(exp.getTime() + Days*24*60*60*1000);
            document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
        }
    </script>
</head>
<body>
<div class="main">
    <h1>请在15分钟内完成支付</h1>
    <div class="w3_agile_main_grids">

        <div class="" style="background: white;">
            <div class="wthree_payment_grid">
                <h2 th:text="'支付金额：'+${price}+'元'"></h2>
                <div id="horizontalTab">
                    <ul class="resp-tabs-list">
                        <li><img src="images/1.jpg" alt=" "/></li>
                        <li><img src="images/2.jpg" alt=" "/></li>
                    </ul>
                    <div class="resp-tabs-container">
                        <div class="agileits_w3layouts_tab1">
                            <form action="#" method="post" class="creditly-card-form agileinfo_form">
                                <section class="creditly-wrapper wthree, w3_agileits_wrapper">
                                    <div class="credit-card-wrapper">
                                        <div class="first-row form-group">
                                            <div class="controls">
                                                <label class="control-label">持卡人姓名</label>
                                                <input class="billing-address-name form-control" type="text" name="name"
                                                       placeholder="John Smith">
                                            </div>
                                            <div class="w3_agileits_card_number_grids">
                                                <div class="w3_agileits_card_number_grid_left">
                                                    <div class="controls">
                                                        <label class="control-label">卡号</label>
                                                        <input class="number credit-card-number form-control"
                                                               type="text" name="number"
                                                               inputmode="numeric" autocomplete="cc-number"
                                                               autocompletetype="cc-number"
                                                               x-autocompletetype="cc-number"
                                                               placeholder="&#149;&#149;&#149;&#149; &#149;&#149;&#149;&#149; &#149;&#149;&#149;&#149; &#149;&#149;&#149;&#149;">
                                                    </div>
                                                </div>
                                                <div class="w3_agileits_card_number_grid_right">
                                                    <div class="controls">
                                                        <label class="control-label">密码</label>
                                                        <input class="security-code form-control" Â·
                                                               inputmode="numeric"
                                                               type="text" name="security-code"
                                                               placeholder="&#149;&#149;&#149;">
                                                    </div>
                                                </div>
                                                <div class="clear"></div>
                                            </div>
                                            <div class="controls">
                                                <label class="control-label">日期</label>
                                                <input class="expiration-month-and-year form-control" type="text"
                                                       name="expiration-month-and-year" placeholder="MM / YY">
                                            </div>
                                        </div>
                                        <button class="submit"><span>前往支付<i class="fa fa-long-arrow-right"
                                                                            aria-hidden="true"></i></span></button>
                                    </div>
                                </section>
                            </form>
                        </div>
                        <div class="agileits_w3layouts_tab2">
                            <form method="post">
                                <input type="email" id="email" name="Email" placeholder="账号" required="">
                                <input type="password" id="password" name="Password" placeholder="密码" required="">
                                <input type="button" value="支  付" style="    background: #1adeed;color: #fff;border: 2px solid #1adeed;margin-right: 4px;
                                margin-bottom: 4px;
                                font-size: 16px;
                                font-weight: 400;
                                -webkit-border-radius: 30px;
                                -moz-border-radius: 30px;
                                -ms-border-radius: 30px;
                                border-radius: 30px;
                                -webkit-transition: 0.5s;
                                -o-transition: 0.5s;
                                transition: 0.5s;
                                padding: 8px 20px;" onclick="pay()">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>
</div>
<!-- credit-card -->
<script type="text/javascript" src="js/creditly.js"></script>
<script type="text/javascript">
    $(function () {
        var creditly = Creditly.initialize(
            '.creditly-wrapper .expiration-month-and-year',
            '.creditly-wrapper .credit-card-number',
            '.creditly-wrapper .security-code',
            '.creditly-wrapper .card-type');

        $(".creditly-card-form .submit").click(function (e) {
            e.preventDefault();
            var output = creditly.validate();
            if (output) {
                // Your validated credit card output
                console.log(output);
            }
        });
    });

</script>
<!-- //credit-card -->
<!-- tabs -->
<script src="js/easy-responsive-tabs.js"></script>
<script>
    $(document).ready(function () {
        $('#horizontalTab').easyResponsiveTabs({
            type: 'default', //Types: default, vertical, accordion
            width: 'auto', //auto or any width like 600px
            fit: true,   // 100% fit in a container
            closed: 'accordion', // Start closed if in accordion view
            activate: function (event) { // Callback function if tab is switched
                var $tab = $(this);
                var $info = $('#tabInfo');
                var $name = $('span', $info);
                $name.text($tab.text());
                $info.show();
            }
        });
    });
</script>
<!-- //tabs -->

</body>
</html>